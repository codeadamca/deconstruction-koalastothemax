<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koalas to the Max Deconstruction</title>

    <style>

    body {
        margin: 0;
        padding: 0;
    }
    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        width: 100vw;
    }

    </style>

</head>
<body>

    <div class="container">
        <svg width="1024" height="1024" id="svg"> 
            <circle cx="512" cy="512" r="512" fill="red" fill-opacity="1" data-depth="1">
        </svg>
    </div>

    <script>

    const svgns = "http://www.w3.org/2000/svg";
    const svg = document.getElementById("svg");

    let counter = 8;

    let randomColour = function() {
        return Math.floor(Math.random()*16777215).toString(16);
    }

    let fourCircles = function(event) {

        let newRadius = event.target.getAttribute('r') / 2;
        let newCx = event.target.getAttribute('cx') - newRadius;
        let newCy = event.target.getAttribute('cy') - newRadius;
        let newDepth = parseInt(event.target.getAttribute('data-depth')) + 1;

        event.target.removeAttribute('onclick');
        event.target.remove();

        let topLeftCircle = document.createElementNS(svgns, 'circle');
        topLeftCircle.setAttributeNS(null, 'cx', newCx);
        topLeftCircle.setAttributeNS(null, 'cy', newCy);
        topLeftCircle.setAttributeNS(null, 'r', newRadius);
        topLeftCircle.setAttributeNS(null, 'style', 'fill: #' + randomColour() + '; fill-opacity: 1;' );
        topLeftCircle.setAttributeNS(null, 'data-depth', newDepth);
        svg.appendChild(topLeftCircle);

        let topRightCircle = document.createElementNS(svgns, 'circle');
        topRightCircle.setAttributeNS(null, 'cx', newCx + newRadius * 2);
        topRightCircle.setAttributeNS(null, 'cy', newCy);
        topRightCircle.setAttributeNS(null, 'r', newRadius);
        topRightCircle.setAttributeNS(null, 'style', 'fill: #' + randomColour() + '; fill-opacity: 1;' );
        topRightCircle.setAttributeNS(null, 'data-depth', newDepth);
        svg.appendChild(topRightCircle);

        let bottomLeftCircle = document.createElementNS(svgns, 'circle');
        bottomLeftCircle.setAttributeNS(null, 'cx', newCx);
        bottomLeftCircle.setAttributeNS(null, 'cy', newCy + newRadius * 2);
        bottomLeftCircle.setAttributeNS(null, 'r', newRadius);
        bottomLeftCircle.setAttributeNS(null, 'style', 'fill: #' + randomColour() + '; fill-opacity: 1;' );
        bottomLeftCircle.setAttributeNS(null, 'data-depth', newDepth);
        svg.appendChild(bottomLeftCircle);

        let bottomRightCircle = document.createElementNS(svgns, 'circle');
        bottomRightCircle.setAttributeNS(null, 'cx', newCx + newRadius * 2);
        bottomRightCircle.setAttributeNS(null, 'cy', newCy + newRadius * 2);
        bottomRightCircle.setAttributeNS(null, 'r', newRadius);
        bottomRightCircle.setAttributeNS(null, 'style', 'fill: #' + randomColour() + '; fill-opacity: 1;' );
        bottomRightCircle.setAttributeNS(null, 'data-depth', newDepth);
        svg.appendChild(bottomRightCircle); 

        if(newDepth < 7)
        {
            topLeftCircle.addEventListener("mouseover", fourCircles);
            topRightCircle.addEventListener("mouseover", fourCircles);
            bottomLeftCircle.addEventListener("mouseover", fourCircles);
            bottomRightCircle.addEventListener("mouseover", fourCircles);
        }

    };

    let circle = document.getElementsByTagName('circle')[0];
    circle.addEventListener('mouseover', fourCircles);   


    // assignRollovers();

    </script>

    
</body> 
</html>